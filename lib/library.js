////////////////////////////////////////////////////////////////////////////////////
// Global variables
////////////////////////////////////////////////////////////////////////////////////
var clientServerDateDifference;

////////////////////////////////////////////////////////////////////////////////////
// Global collections
////////////////////////////////////////////////////////////////////////////////////
messages = new Meteor.Collection("messages");
rooms = new Meteor.Collection("rooms");
drawings = new Meteor.Collection('drawings');


////////////////////////////////////////////////////////////////////////////////////
// Function for publish/subscribe - Publish current logged in users
////////////////////////////////////////////////////////////////////////////////////
returnActiveUsers = function () {
	return Meteor.users.find({'profile.loggedIn' : true}, {
		fields : {
			'username' : 1,
			'profile.loggedIn' : 1,
			'profile.pvt.invited' : 1,
			'profile.pvt.inviter' : 1,
			'profile.pvt.inviting' : 1,
			'profile.pvt.invitee' : 1,
			'profile.pvt.room' : 1
		}
	});
};


////////////////////////////////////////////////////////////////////////////////////
// Function for publish/subscribe - Publish messages
////////////////////////////////////////////////////////////////////////////////////
returnMessages = function () {
	return messages.find({});
};


////////////////////////////////////////////////////////////////////////////////////
// Function for publish/subscribe - Publish rooms
////////////////////////////////////////////////////////////////////////////////////
returnRooms = function () {
	return rooms.find({});
};


////////////////////////////////////////////////////////////////////////////////////
// Function for publish/subscribe - Publish drawings
////////////////////////////////////////////////////////////////////////////////////
returnDrawings = function () {
	return drawings.find({});
};